box: ros:kinetic-robot

build:
  steps:
    - script:
      name: install dependencies
      code: |
        sudo apt-get update
        sudo apt-get install -qy g++ libeigen3-dev
    - script:
      name: initialize git submodules
      code: |
        git submodule update --init --recursive
    - script:
      name: rosdep update
      code: |
        sudo rosdep init
        rosdep update
    - script:
      name: build
      code: |
        cd ..
        mkdir -p catkin_ws/src
        mv source catkin_ws/src/
        cd catkin_ws
        catkin_init_workspace src
        rosdep install --from-paths src --ignore-src -y -r
        catkin_make -DCMAKE_BUILD_TYPE=Release
